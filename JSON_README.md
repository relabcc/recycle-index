# static/data JSON 檔案說明文件

本文件說明 `static/data` 目錄下三個 JSON 檔案的用途、結構以及它們之間的關聯。

## 檔案列表

1.  **`scale.json`**: 視覺呈現設定檔
2.  **`cfg.json`**: 物件組成設定檔
3.  **`data.json`**: 回收知識庫資料檔

---

## 1. `scale.json` (視覺呈現設定檔)

此檔案主要定義了各個回收品項在不同情境（桌面版、手機版、分享圖、首頁）下的**視覺縮放比例**與**位置偏移**。

### 主要欄位說明
*   **`name`**: 品項名稱（作為關聯 Key）。
*   **`scale`**: 桌面版預設縮放比例 (百分比，如 "95" 代表 95%)。
*   **`x`**, **`y`**: 桌面版預設位置偏移量 (單位通常為 % 或像素，視實作而定)。
*   **`shareScale`**: 分享圖片時的縮放比例。
*   **`mobileScale`**: 手機版縮放比例。
*   **`mobileX`**, **`mobileY`**: 手機版位置偏移量。
*   **`mobileShareScale`**: 手機版分享圖縮放比例。
*   **`homeScale`**: 首頁展示時的縮放比例。
*   **`homeX`**, **`homeY`**: 首頁展示時的位置偏移量。
*   **`rotate`**: 旋轉角度。
*   **`gap`**: 某些排列情境下的間距。
*   **`face`**, **`faceNo`**: 表情相關設定（CSS transform 屬性）。

---

## 2. `cfg.json` (物件組成設定檔)

此檔案定義了每個回收品項的**圖層結構**。一個品項可能由多個圖層組成（例如：瓶身、瓶蓋、吸管），此檔案描述了這些圖層的圖片來源、尺寸與堆疊順序。

### 主要欄位說明
*   **`垃圾名稱`**: 品項名稱（關聯 Key）。
*   **`圖層順序`**: 圖層堆疊順序（數值越小可能越底層或越上層，需視程式邏輯而定）。
*   **`圖層名稱`**: 該圖層的描述（如 "瓶蓋"、"瓶身"）。
*   **`圖層X位置`**, **`圖層Y位置`**: 該圖層在組合物件中的絕對座標。
*   **`圖層W寬度`**, **`圖層H高度`**: 該圖層圖片的原始寬高。
*   **`對應部分/材質`**: 該圖層對應的材質說明。
*   **`納入題庫`**: 標記該圖層是否作為測驗題目的一部分。

---

## 3. `data.json` (回收知識庫資料檔)

此檔案包含了回收品項的**詳細知識與文案**，是用於顯示給使用者的教育資訊。

### 主要欄位說明
*   **`品項`**: 品項名稱（關聯 Key）。
*   **`同義詞`**: 使用者可能搜尋的關鍵字。
*   **`可分解為哪些部分/材質`**: 詳細材質說明。
*   **`回收前使用者應做什麼處理`**: 指引使用者回收步驟（如清洗、拆解）。
*   **`處理後應該丟哪一類?`**: 分類指引（如一般垃圾、塑膠容器）。
*   **`回收狀況`**, **`各縣市回收狀況`**: 目前的回收政策狀態。
*   **`文案`**: 網站上顯示的詳細介紹文字。
*   **`SEO標題`**, **`SEO敘述`**: 搜尋引擎優化用的文字。

---

## 檔案關聯性

這三個檔案透過 **品項名稱** (如 "塑膠飲料杯") 進行關聯：

*   **`data.json`** 提供品項的「內容資訊」。
*   **`cfg.json`** 提供品項的「圖片組成結構」。
*   **`scale.json`** 提供品項的「顯示調整參數」。

---

## 關於自動推算 Scale 的分析

針對「在 `scale.json` 欄位缺漏時，能否利用 `cfg.json` 自動推算 `scale` 等數值」的問題，分析如下：

### 結論
**無法精準自動推算，但可建立粗略的預設值規則。**

### 原因分析
1.  **視覺權重不一**：
    經比對 `cfg.json` 的原始尺寸與 `scale.json` 的設定值，發現兩者並無嚴格的線性關係。
    *   例如「熱咖啡杯」原始高度較小 (約 237px)，但 Scale 設為 100。
    *   「鋁罐」原始高度較大 (約 486px)，但 Scale 僅設為 65。
    *   這顯示 `scale` 值是設計師依據**視覺平衡**（Visual Weight）手動調整的結果，而非單純依據尺寸縮放。有些物品雖然尺寸大，但可能為了在畫面中不顯得過於突兀而被刻意縮小；反之亦然。

2.  **情境差異**：
    `homeScale` (首頁)、`mobileScale` (手機) 等數值通常取決於該版面的排版需求（如首頁可能需要統一的大小感，或強調某些物件），這部分資訊不存在於 `cfg.json` 中。

### 建議解決方案
若 `scale.json` 缺失資料，建議採取以下**備援策略 (Fallback Strategy)**：

1.  **計算原始邊界 (Bounding Box)**：
    利用 `cfg.json` 中該品項所有圖層的 `X, Y, W, H` 計算出完整的組合物件總寬高。
2.  **設定目標基準值**：
    定義一個「標準視覺高度」（例如 350px）。
3.  **自動計算預設 Scale**：
    `預設 Scale = (標準視覺高度 / 原始總高度) * 100`
    
    *範例邏輯：*
    ```javascript
    const TARGET_HEIGHT = 350; // 假設標準高度
    const originalHeight = calculateHeightFromCfg(itemName); // 從 cfg.json 計算
    let calculatedScale = Math.round((TARGET_HEIGHT / originalHeight) * 100);
    // 設定上下限，避免過大或過小
    calculatedScale = Math.max(50, Math.min(120, calculatedScale));
    ```

此方法可確保物件「不會過大或過小」，但無法達到設計師手調的完美視覺平衡。建議自動推算後，仍需保留人工微調的空間。
